<ion-view view-title="{{recepientProfile.name}}">

  <ion-nav-buttons  side="right">
    <button class="button button-light" ng-click="clearChat()">
      <div class="assertive">Clear Chat</div>
    </button>
  </ion-nav-buttons>

  <ion-content>
    <ion-list>
      <!--<ion-item class="item-divider" >from a person</ion-item>-->

      <span ng-repeat="message in messageList">
        <!--//////////////////////////////////////////////////////////////////////////////////////////////////////////-->

        <ion-item ng-if="message.from  == recipientUid"
                  class=" item-remove-animate item-avatar item-icon-right item-text-wrap">

          <img ng-src="{{recepientProfile.profileImageURL}}">

          <p class="lowOpacity" >{{message.timeStamp | date:'yyyy-MM-dd HH:mm'}}</p>
          <!--<p>{{message.timeStamp | date:'yyyy-MM-dd HH:mm:ss Z'}}</p>-->

          <span >{{message.text}}</span>

          <img ng-if="message.image" ng-src="{{message.image}}" width="80%" alt="">

          <!--<i class="icon ion-chevron-right icon-accessory"></i>-->

          <ion-option-button class="button-assertive" ng-click="messageList.$remove(message)">
            <i class="icon ion-android-delete"></i>
          </ion-option-button>
        </ion-item>

        <!--//////////////////////////////////////////////////////////////////////////////////////////////////////////-->

        <ion-item ng-if="message.from  == myUid"
                  align="right"
                  class=" item-remove-animate item-avatar item-icon-right item-text-wrap">

          <p class="lowOpacity">{{message.timeStamp | date:'yyyy-MM-dd HH:mm'}}</p>
          <!--<p>{{message.timeStamp | date:'yyyy-MM-dd HH:mm:ss Z'}}</p>-->

          <span >{{message.text}}</span>

          <img ng-if="message.image" ng-src="{{message.image}}" width="80%" alt="">

          <!--<i class="icon ion-chevron-right icon-accessory"></i>-->

          <ion-option-button class="button-assertive" ng-click="messageList.$remove(message)">
            <i class="icon ion-android-delete"></i>
          </ion-option-button>
        </ion-item>
        <!--//////////////////////////////////////////////////////////////////////////////////////////////////////////-->

      </span>


      <ion-item class="item opacity-hide">

      </ion-item>


    </ion-list>

  </ion-content>


  <form class="bar bar-footer row" ng-submit="sendMessage( )">

    <div class="item-input-wrapper">
      <input required type="text" class="item-input col item-input-wrapper" ng-model="messageText">
    </div>
    <div>
      <div class="button button-positive" ng-click="uploadImage()"> <i class="icon ion-camera"></i> </div>
      <button class="button button-positive" type="submit">Send</button>
    </div>
  </form>

  <input ng-show="false" type="file" accept=" image/* " capture="camera" id="file-input">


</ion-view>
